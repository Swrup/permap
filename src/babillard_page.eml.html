let f request =

% let redirect = Dream.to_percent_encoded "/new_thread" in
% let new_thread_url =
%   if Option.is_none @@ Dream.session "nick" request then
%     Format.sprintf "/login?redirect=%s" redirect
%   else "/new_thread"
% in
  <script type="text/javascript" src="/assets/js/js_babillard.js" defer="defer"></script>
  <h1>Babillard is love ❤️</h1>
  <br />
  <div class="row mb-3">
    <div class="col-md-6">
      <div id="map"></div>
      <br />
      <button class="btn btn-primary" id="geolocalize">Geolocalize me</button>
      <a class="btn btn-primary" href="<%s! new_thread_url %>">New Thread</a>
    </div>
    <div class="col-md-6">
      <div id="thread_preview_div"></div>
      <a id="thread_link"></a>
    </div>
  </div>
