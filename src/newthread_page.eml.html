let f ~board request =
%let url = Format.asprintf "/%a/new_thread" Babillard.pp_board board in
% begin match Dream.session "nick" request with
% | None ->
Login to make a new thread.
% | Some _nick ->
<script type="text/javascript" src="/assets/js/js_newthread.js" defer="defer"></script>
<div id="board" data-board="babillard">Click the map to make a new thread:</div>
<div class="row mb-3">
    <div class="col-md-6">
        <div id="map"></div>
    </div>

    <div class="col-md-6" id="newthread-form" style="visibility:hidden">
<%s! Dream.form_tag ~action:url ~enctype:`Multipart_form_data request %>
        <input type="hidden" id="lat_input" name="lat_input">
        <input type="hidden" id="lng_input" name="lng_input">

        <label for="subject" id="subjectLabel" class="form-label">Subject</label>
        <input name="subject" type="text" class="form-control" id="subject" aria-labelledby="subjectLabel"></input>

        <label for="threadComment" id="threadCommentLabel" class="form-label">Comment</label>
        <textarea name="threadComment" type="text" class="form-control" id="threadComment" aria-labelledby="threadCommentLabel"></textarea>

        <label for="tags" id="tagsLabel" class="form-label">Tags</label>
        <input name="tags" type="text" class="form-control" id="tags" aria-labelledby="tagsLabel"></input>

        <input id="file" name="file" aria-describedby="fileHelp" type="file">
        <div id="fileHelp" class="form-text">Add a picture for your thread</div>
      <button type="submit" class="btn btn-primary">Make Thread</button>
</form>
    </div>
</div>
% end;
